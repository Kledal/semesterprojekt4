@using Makerlab.DAL
@using Makerlab.Models
@model Makerlab.Models.User


@{
    ViewBag.Title = "Oversigt";
}

@foreach (var item in MessageManager.Read())
{
    if (item.Show)
    {
        <div class="container">
            <div class="alert alert-warning">
                <a href="#" class="close" data-dismiss="alert">&times;</a>
                @item.Content
            </div>
        </div>
    }
}

<div id="printer_schedule" class="dhx_cal_container" style="height: 350px;">
    <div class="dhx_cal_navline">
        <div class="dhx_cal_prev_button">&nbsp;</div>
        <div class="dhx_cal_next_button">&nbsp;</div>
        <div class="dhx_cal_today_button"></div>
        <div class="dhx_cal_date"></div>
    </div>
    <div class="dhx_cal_header"></div>
    <div class="dhx_cal_data"></div>
</div>

<script>
    var printers = @Html.Raw(Json.Encode(ViewBag.printers));
    var bookings = @Html.Raw(Json.Encode(ViewBag.bookings));

    $(document).ready(function () {

        // Timeline for printers
        scheduler.locale.labels.timeline_tab = "Timeline";
        scheduler.locale.labels.section_custom = "Printer";
        scheduler.config.fix_tab_position = false;
        scheduler.config.multisection = true;
        //=====================
        //Block modifications
        //=====================
        scheduler.config.details_on_create = true;
        scheduler.config.readonly_form = true;
        scheduler.config.dblclick_create = false; // Sørger for at der ikke er klik events.
        scheduler.attachEvent("onBeforeDrag", function () { return false; }); // Sørger for man ikke kan lave en drag event.

        //===============
        //Configuration
        //===============

        scheduler.createTimelineView({
            name: "timeline",
            x_unit: "minute",
            x_date: "%H:%i",
            x_step: 60,
            x_size: 24,
            x_start: 0,
            x_length: 24,
            dy: 40,
            event_dy: "full",
            round_position: true,
            y_unit: printers,
            y_property: "printer_id",
            render: "bar"
        });


        //========================
        //Initialize
        //========================

        scheduler.init("printer_schedule", new Date(), "timeline");
        scheduler.parse(bookings, "json");
    });

</script>
